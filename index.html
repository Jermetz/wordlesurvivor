<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Survivor Scoreboard</title>
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --accent: #ffae00; /* Survivor Orange */
            --text: #ffffff;
            --low-score: #eb4034;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text);
            font-family: 'Arial Black', sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .palm-tree {
            font-size: 2.5rem;
            margin: 0 10px;
        }

        h1 { font-size: 1.5rem; color: var(--accent); margin: 0; text-transform: uppercase; }
        p { font-size: 0.8rem; margin: 5px 0; color: #888; }

        #leaderboard {
            width: 100%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            flex-grow: 1;
        }

        .player-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid var(--accent);
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .rank { font-size: 1.2rem; margin-right: 15px; color: var(--accent); width: 30px; }
        .name { flex-grow: 1; font-size: 1.1rem; }
        .score { font-size: 1.3rem; font-weight: bold; }

        .extinguished {
            opacity: 0.5;
            border-left: 5px solid #555;
            filter: grayscale(1);
        }

        .legacy-tag {
            font-size: 0.6rem;
            background: gold;
            color: black;
            padding: 2px 5px;
            border-radius: 3px;
            margin-left: 10px;
            vertical-align: middle;
        }

        .button-container {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            width: 100%;
            max-width: 400px;
        }

        .action-btn {
            flex: 1;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            font-family: 'Arial Black', sans-serif;
            text-transform: uppercase;
        }

        #refresh-btn {
            margin-top: 30px;
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            font-family: 'Arial Black', sans-serif;
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
            padding-top: 60px;
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: 5% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid var(--accent);
            width: 90%; /* Could be more or less, depending on screen size */
            max-width: 500px;
            border-radius: 10px;
            color: var(--text);
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            font-weight: normal;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: var(--accent);
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-header {
            font-family: 'Arial Black', sans-serif;
            color: var(--accent);
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .modal-body h3 {
            color: var(--accent);
            margin-top: 15px;
            margin-bottom: 5px;
        }

        .modal-body ul {
            padding-left: 20px;
        }

        .modal-body li {
            margin-bottom: 5px;
        }
        
        /* Daily Stakes Table */
        .stakes-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        .stakes-table th, .stakes-table td {
            border: 1px solid #555;
            padding: 8px;
            text-align: left;
        }
        .stakes-table th {
            background-color: #444;
            color: var(--accent);
        }
        .stakes-row-1 { background-color: #8B4513; } /* Legacy */
        .stakes-row-2 { background-color: #A0522D; } /* Idol */
        .stakes-row-3 { background-color: #556B2F; } /* Reward */
        .stakes-row-4 { background-color: #6B8E23; } /* Shelter */
        .stakes-row-5 { background-color: #CD853F; } /* Vote */
        .stakes-row-6 { background-color: #D2691E; } /* Danger */
        .stakes-row-x { background-color: #B22222; } /* Tribal */

    </style>
</head>
<body>

<header>
    <span class="palm-tree">üå¥</span>
    <div>
        <h1>WORDLE: EDGE OF EXTINCTION</h1>
        <p>Current Rankings</p>
    </div>
    <span class="palm-tree">üå¥</span>
</header>

<div id="leaderboard">
    <p style="text-align:center">Gathering the tribe...</p>
</div>

<div class="button-container">
    <button id="rules-btn" class="action-btn">VIEW RULES</button>
    <button id="stakes-btn" class="action-btn">VIEW DAILY STAKES</button>
</div>
<button id="refresh-btn" onclick="location.reload()">REFRESH TRIBE</button>

<div id="rulesModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('rulesModal')">&times;</span>
    <div class="modal-header">ATTENTION CASTAWAYS!</div>
    <div class="modal-body">
        <p>In honor of Survivor Season 50, we are officially kicking off: <strong>WORDLE: EDGE OF EXTINCTION</strong>.</p>
        <p>You just play Wordle daily per usual but now there‚Äôs running points, pride and survivor themed stakes involved :)</p>
        <p><strong>WE START:</strong> The 1st day of Survivor 50: Wed. Feb. 25th. (The season is approx 14 weeks long)</p>
        <p>I‚Äôll be your ‚ÄúJeff Probst‚Äù, come on in survivors!</p>

        <h3>THE SETUP</h3>
        <p>Everyone starts with 50 Life Points. The "Sole Wordler" is whoever has the most points remaining after the Survivor 50 Finale night.</p>
        <p>I will keep track of all points and post a weekly update (Tree Mail) by Wednesday morning.</p>
        
        <h3>HARD MODE BONUS</h3>
        <p>Hard Mode (*) players get +1 Point to offset any scoring penalty.</p>
        <p><em>Note: This only applies to negative scores (it doesn't boost a 4/6 or better).</em></p>

        <h3>THE FINE PRINT</h3>
        <ul>
            <li><strong>HONOR SYSTEM:</strong> No cheating. No using free hints or multiple devices. We play fair or your torch gets snuffed.</li>
            <li><strong>THE DEADLINE:</strong> Post by 11:59 PM ET. Miss a day? -5 Point Penalty (unless you use a Shot in the Dark, or an advantage saves you).</li>
        </ul>

        <h3>SHOT IN THE DARK</h3>
        <p>You have the power to erase your 5 worst scores. Reply "Playing my Shot in the Dark!" to wipe a terrible score (or a missed day) from your record.</p>

        <h3>IDOLS & ADVANTAGES</h3>
        <ul>
            <li><strong>2/6 (Hidden Immunity Idol):</strong> You immediately score +2 points AND bank an idol. To use it, shout "PLAYING MY IDOL!" on a future bad day. It will negate that day's penalty, bringing your score to a safe 0.</li>
            <li><strong>1/6 (Legacy Advantage):</strong> Did you guess it on the first try?! You earn +3 points and a Permanent, Automatic Idol. You don't even have to declare it‚Äîthis advantage permanently sits in your inventory and will automatically deploy to save you from your next fatal penalty (like an X/6 or a missed day).</li>
            <li><strong>Bank Rule:</strong> You can only hold 2 standard Idols at a time. All standard idols expire 1 week before the finale.</li>
        </ul>

        <h3>EDGE OF EXTINCTION</h3>
        <p>Hit 0 Points? You're out. To return to the game, you must score 4/6 or better for 3 days in a row.</p>

        <h3>SURVIVOR WEDNESDAYS</h3>
        <p>On episode nights, all gains and losses are DOUBLED. Hard mode bonus (+1 pt) still applies to negative scores only.</p>
        
        <p style="text-align:center; margin-top: 20px;"><strong>Outwit, Outplay, Outwordle! Who will be the Sole Wordler?</strong></p>
    </div>
  </div>
</div>

<div id="stakesModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('stakesModal')">&times;</span>
    <div class="modal-header">THE DAILY STAKES</div>
    <div class="modal-body">
        <table class="stakes-table">
            <thead>
                <tr>
                    <th>GUESS</th>
                    <th>REWARD / PENALTY</th>
                </tr>
            </thead>
            <tbody>
                <tr class="stakes-row-1">
                    <td>1/6 üëë</td>
                    <td>LEGACY ADVANTAGE: +3 Points (2 Idols)</td>
                </tr>
                <tr class="stakes-row-2">
                    <td>2/6 üèÜ</td>
                    <td>HIDDEN IMMUNITY IDOL: +2 Points (1 idol)</td>
                </tr>
                <tr class="stakes-row-3">
                    <td>3/6 üõ°Ô∏è</td>
                    <td>REWARD CHALLENGE: +1 Point</td>
                </tr>
                <tr class="stakes-row-4">
                    <td>4/6 ü™∑</td>
                    <td>THE SHELTER: 0 Points</td>
                </tr>
                <tr class="stakes-row-5">
                    <td>5/6 ‚õî</td>
                    <td>VOTE AGAINST YOU: -1 Point</td>
                </tr>
                <tr class="stakes-row-6">
                    <td>6/6 ‚õî</td>
                    <td>DANGER ZONE: üî• -2 Points</td>
                </tr>
                <tr class="stakes-row-x">
                    <td>X/6 üî•</td>
                    <td>TRIBAL COUNCIL: -3 Points</td>
                </tr>
            </tbody>
        </table>
        <p style="text-align:center; margin-top: 10px;"><strong>‚úÖ SURVIVOR WEDNESDAYS: ALL POINTS DOUBLED</strong></p>
    </div>
  </div>
</div>

<script>
    // PASTE YOUR GOOGLE SHEET CSV URL HERE
    const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRk5uES45q8369C8qUMoOQERVb5Wn2JTdcJl8Gu2LLnB5LCxn5bBhDUf1LdI73-Q3lAuvaX1LvU9adF/pub?output=csv';

    async function loadScores() {
        try {
            const response = await fetch(SHEET_URL);
            const data = await response.text();
            const rows = data.split('\n').slice(1); // Skip header row

            const players = rows.map(row => {
                const [name, score] = row.split(',');
                return { name, score: parseInt(score) || 0 };
            }).sort((a, b) => b.score - a.score);

            const container = document.getElementById('leaderboard');
            container.innerHTML = '';

            players.forEach((player, index) => {
                if(!player.name) return;
                
                const card = document.createElement('div');
                card.className = 'player-card';
                
                // Example: If score is below 40, they are "Extinguished"
                if (player.score < 40) card.classList.add('extinguished');

                card.innerHTML = `
                    <div class="rank">#${index + 1}</div>
                    <div class="name">
                        ${player.name}
                        ${player.score >= 60 ? '<span class="legacy-tag">LEGACY</span>' : ''}
                    </div>
                    <div class="score">${player.score}</div>
                `;
                container.appendChild(card);
            });
        } catch (e) {
            document.getElementById('leaderboard').innerHTML = '<p>The tribe has spoken (Error loading data).</p>';
        }
    }

    loadScores();

    // Modal Logic
    const rulesModal = document.getElementById("rulesModal");
    const stakesModal = document.getElementById("stakesModal");
    const rulesBtn = document.getElementById("rules-btn");
    const stakesBtn = document.getElementById("stakes-btn");

    rulesBtn.onclick = function() { rulesModal.style.display = "block"; }
    stakesBtn.onclick = function() { stakesModal.style.display = "block"; }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == rulesModal) { rulesModal.style.display = "none"; }
        if (event.target == stakesModal) { stakesModal.style.display = "none"; }
    }
</script>

</body>
</html>
